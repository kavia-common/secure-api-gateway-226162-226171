{"is_source_file": true, "format": "Python", "description": "This file sets up test fixtures for a FastAPI application, configuring environment variables, in-memory data, dependency overrides, and test clients for unit testing. It facilitates isolated, consistent API testing without actual database or network access.", "external_files": ["src.api.main", "src.api.routes_v1", "src.api.security", "src.api.database"], "external_methods": ["src.api.main.create_app", "src.api.routes_v1.get_user_by_username", "src.api.routes_v1.verify_password", "src.api.security.create_access_token", "src.api.database.get_db"], "published": [], "classes": [{"name": "SimpleNamespace", "description": "A dummy class from 'types' module used to create mutable, attribute-accessible objects for testing."}], "methods": [{"name": "_ensure_test_env()", "description": "A fixture ensuring test environment variables are set before tests run.", "scope": "", "scopeKind": ""}, {"name": "seeded_user()", "description": "A fixture creating a mock user object with attributes similar to a database model for authentication tests.", "scope": "", "scopeKind": ""}, {"name": "users_store(seeded_user)", "description": "A fixture providing an in-memory store of users for lookup during tests.", "scope": "", "scopeKind": ""}, {"name": "app_overridden(users_store)", "description": "A fixture that creates the FastAPI app with dependencies overridden to use in-memory data sources for testing.", "scope": "", "scopeKind": ""}, {"name": "TestClient client(app_overridden)", "description": "A fixture providing a TestClient instance to interact with the app in tests.", "scope": "", "scopeKind": ""}, {"name": "str bearer_token(seeded_user)", "description": "A fixture generating a valid JWT bearer token for the seeded user to authenticate test requests.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] _dummy_get_db()", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "_get_user_by_username(_db, username: str)", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "bool _verify_password(plain: str, _password_hash: str)", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "to_profile_dict()", "scope": "seeded_user", "scopeKind": "function", "description": "unavailable"}], "calls": ["src.api.main.create_app", "routes_v1.get_user_by_username", "routes_v1.verify_password", "src.api.security.create_access_token"], "search-terms": ["conftest.py", "pytest fixture setup", "FastAPI dependency override", "JWT token fixture", "in-memory user store", "test client setup"], "state": 2, "file_id": 12, "knowledge_revision": 44, "git_revision": "341b27fce15d84cc813094a133b3cc8213d13ab8", "revision_history": [{"29": ""}, {"35": "341b27fce15d84cc813094a133b3cc8213d13ab8"}, {"42": "341b27fce15d84cc813094a133b3cc8213d13ab8"}, {"44": "341b27fce15d84cc813094a133b3cc8213d13ab8"}], "ctags": [{"_type": "tag", "name": "_dummy_get_db", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _dummy_get_db() -> Generator[Session, None, None]:$/", "file": true, "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "_ensure_test_env", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def _ensure_test_env():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_user_by_username", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _get_user_by_username(_db, username: str):$/", "file": true, "language": "Python", "kind": "function", "signature": "(_db, username: str)", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "_verify_password", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _verify_password(plain: str, _password_hash: str) -> bool:$/", "file": true, "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(plain: str, _password_hash: str)", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "app_overridden", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def app_overridden(users_store):$/", "language": "Python", "kind": "function", "signature": "(users_store)"}, {"_type": "tag", "name": "bearer_token", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def bearer_token(seeded_user) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(seeded_user)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def client(app_overridden) -> TestClient:$/", "language": "Python", "typeref": "typename:TestClient", "kind": "function", "signature": "(app_overridden)"}, {"_type": "tag", "name": "seeded_user", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def seeded_user():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "to_profile_dict", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def to_profile_dict():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "seeded_user", "scopeKind": "function"}, {"_type": "tag", "name": "users_store", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def users_store(seeded_user):$/", "language": "Python", "kind": "function", "signature": "(seeded_user)"}], "hash": "d6e4c7cc28e6a6d2ddf705b4f7d5cd4e", "format-version": 4, "code-base-name": "rest_api_backend", "filename": "rest_api_backend/tests/conftest.py"}
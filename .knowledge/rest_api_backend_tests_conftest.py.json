{"is_source_file": true, "format": "Python", "description": "This file contains test fixtures and setup code for testing a FastAPI application in a pytest environment, specifically for the secure API gateway project. It defines environment setup, in-memory user fixtures, application override configurations, and dependency patching to facilitate isolated testing without external network or database access.", "external_files": ["src.api.main", "src.api.routes_v1", "src.api.security", "src.api.database"], "external_methods": ["src.api.main.create_app", "src.api.routes_v1.get_user_by_username", "src.api.routes_v1.verify_password", "src.api.security.create_access_token", "src.api.database.get_db"], "published": ["seeded_user", "users_store", "app_overridden", "client", "bearer_token"], "classes": [], "methods": [{"name": "_ensure_test_env()", "description": "Initializes environment variables for testing if not already set.", "scope": "", "scopeKind": ""}, {"name": "seeded_user()", "description": "Creates a mocked user object with username, creation date, and password hash for in-memory testing.", "scope": "", "scopeKind": ""}, {"name": "users_store(seeded_user)", "description": "In-memory store (dictionary) for user objects used during tests.", "scope": "", "scopeKind": ""}, {"name": "app_overridden(users_store)", "description": "Creates FastAPI app instance with dependency overrides for testing, including in-memory user lookup and dummy database session.", "scope": "", "scopeKind": ""}, {"name": "TestClient client(app_overridden)", "description": "FastAPI test client that uses the overridden app for testing API endpoints.", "scope": "", "scopeKind": ""}, {"name": "str bearer_token(seeded_user)", "description": "Generates a valid JWT bearer token for the seeded user for use in authenticated tests.", "scope": "", "scopeKind": ""}, {"name": "Generator[Session,None,None] _dummy_get_db()", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "_get_user_by_username(_db, username: str)", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "bool _verify_password(plain: str, _password_hash: str)", "scope": "app_overridden", "scopeKind": "function", "description": "unavailable"}, {"name": "to_profile_dict()", "scope": "seeded_user", "scopeKind": "function", "description": "unavailable"}], "calls": ["src.api.main.create_app", "__import__(\"src.api.database\", fromlist=[\"get_db\"]).get_db", "routes_v1.get_user_by_username", "routes_v1.verify_password", "src.api.security.create_access_token"], "search-terms": ["conftest", "pytest fixtures", "FastAPI test setup", "dependency overrides", "in-memory user", "JWT token fixture"], "state": 2, "file_id": 12, "knowledge_revision": 45, "git_revision": "bd95e5ec8fd59382531536dbd7f8b03248aadadb", "revision_history": [{"29": ""}, {"35": "341b27fce15d84cc813094a133b3cc8213d13ab8"}, {"42": "341b27fce15d84cc813094a133b3cc8213d13ab8"}, {"44": "341b27fce15d84cc813094a133b3cc8213d13ab8"}, {"45": "bd95e5ec8fd59382531536dbd7f8b03248aadadb"}], "ctags": [{"_type": "tag", "name": "_dummy_get_db", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _dummy_get_db() -> Generator[Session, None, None]:$/", "file": true, "language": "Python", "typeref": "typename:Generator[Session,None,None]", "kind": "function", "signature": "()", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "_ensure_test_env", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def _ensure_test_env():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_get_user_by_username", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _get_user_by_username(_db, username: str):$/", "file": true, "language": "Python", "kind": "function", "signature": "(_db, username: str)", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "_verify_password", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def _verify_password(plain: str, _password_hash: str) -> bool:$/", "file": true, "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(plain: str, _password_hash: str)", "scope": "app_overridden", "scopeKind": "function"}, {"_type": "tag", "name": "app_overridden", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def app_overridden(users_store):$/", "language": "Python", "kind": "function", "signature": "(users_store)"}, {"_type": "tag", "name": "bearer_token", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def bearer_token(seeded_user) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(seeded_user)"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def client(app_overridden) -> TestClient:$/", "language": "Python", "typeref": "typename:TestClient", "kind": "function", "signature": "(app_overridden)"}, {"_type": "tag", "name": "seeded_user", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def seeded_user():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "to_profile_dict", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^    def to_profile_dict():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "seeded_user", "scopeKind": "function"}, {"_type": "tag", "name": "users_store", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/tests/conftest.py", "pattern": "/^def users_store(seeded_user):$/", "language": "Python", "kind": "function", "signature": "(seeded_user)"}], "hash": "7d22410a6c5d37fd6e692b16b0775d27", "format-version": 4, "code-base-name": "rest_api_backend", "filename": "rest_api_backend/tests/conftest.py"}
{"is_source_file": true, "format": "Python", "description": "This file defines API routes for version 1 of a REST API using FastAPI. It includes endpoints for health check, user login to obtain JWT tokens, and retrieving the current user's profile. It uses dependencies for database access and security, and defines data models for request and response schemas.", "external_files": ["./config", "./database", "./security"], "external_methods": ["get_db", "get_user_by_username", "verify_connection", "verify_password", "decode_access_token", "create_access_token"], "published": ["router", "TokenResponse", "LoginRequest", "UserProfile", "HealthResponse", "get_current_user", "health", "get_token", "me"], "classes": [{"name": "TokenResponse", "description": "Response model containing JWT access token and type."}, {"name": "LoginRequest", "description": "Request model for login containing username and password."}, {"name": "UserProfile", "description": "Response model containing user's profile information."}, {"name": "HealthResponse", "description": "Response model indicating health check status."}], "methods": [{"name": "User get_current_user( token: str = Depends(oauth2_scheme), db: Session = Depends(get_db), )", "description": "Dependency function to retrieve current user from JWT token.", "scope": "", "scopeKind": ""}, {"name": "HealthResponse health()", "description": "Health check endpoint verifying API and database availability.", "scope": "", "scopeKind": ""}, {"name": "TokenResponse get_token(payload: LoginRequest, db: Session = Depends(get_db))", "description": "Endpoint to authenticate user and return a JWT token.", "scope": "", "scopeKind": ""}, {"name": "UserProfile me(current_user: User = Depends(get_current_user))", "description": "Endpoint to retrieve the current authenticated user's profile.", "scope": "", "scopeKind": ""}], "calls": ["decode_access_token", "get_user_by_username", "verify_connection", "verify_password", "create_access_token"], "search-terms": ["FastAPI routes", "JWT authentication", "TokenResponse", "get_token", "healthcheck", "API router", "v1_0"], "state": 2, "file_id": 8, "knowledge_revision": 19, "git_revision": "dbc2a5444a684d2edc898e44d4365d79d773d8bd", "ctags": [{"_type": "tag", "name": "HealthResponse", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^class HealthResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserProfile", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^class UserProfile(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^def get_current_user($/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "( token: str = Depends(oauth2_scheme), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "get_token", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^def get_token(payload: LoginRequest, db: Session = Depends(get_db)) -> TokenResponse:$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "function", "signature": "(payload: LoginRequest, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^def health() -> HealthResponse:$/", "language": "Python", "typeref": "typename:HealthResponse", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^def me(current_user: User = Depends(get_current_user)) -> UserProfile:$/", "language": "Python", "typeref": "typename:UserProfile", "kind": "function", "signature": "(current_user: User = Depends(get_current_user))"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^    password: str = Field(..., examples=[\"changeme\"])$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^router = APIRouter(prefix=\"\\/v1.0\", tags=[\"v1.0\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^    status: str = \"ok\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "HealthResponse", "scopeKind": "class"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^    token_type: str = Field(default=\"bearer\", description=\"Token type, always 'bearer'\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/secure-api-gateway-226162-226171/rest_api_backend/src/api/routes_v1.py", "pattern": "/^    username: str = Field(..., examples=[\"testuser\"])$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}], "hash": "c4acbb638053a1b2e8229f5c2af946c9", "format-version": 4, "code-base-name": "rest_api_backend", "filename": "rest_api_backend/src/api/routes_v1.py", "fields": [{"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "oauth2_scheme = OAuth2PasswordBearer(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str password", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/v1.0\", tags=[\"v1.0\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str status", "scope": "HealthResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str token_type", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str username", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"19": "dbc2a5444a684d2edc898e44d4365d79d773d8bd"}]}